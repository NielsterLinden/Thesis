# @package _global_

experiment:
  name: "compare_vq_vs_none"

defaults:
  - /env: stoomboot
  - /data: h5_tokens
  - /logging: plots_minimal
  - /phase1/encoder: mlp
  - /phase1/decoder: mlp
  - /phase1/latent_space: none
  - /phase1/trainer: ae
  - _self_

# --- High-level dispatcher key (CRITICAL!) ---
loop: ae

# Logging customization
logging:
  output_root: "${env.output_root}"
  moments:
    on_epoch_end_quick: false
    on_train_end_full: true
  families:
    losses:   { enabled: true }
    metrics:  { enabled: true }
    recon:    { enabled: false }
    codebook: { enabled: true }
    latency:  { enabled: false }

# Hydra multirun configuration
hydra:
  mode: MULTIRUN
  job:
    chdir: true
    name: ${experiment.name}
  sweep:
    dir: ${env.output_root}/experiments/exp_${now:%Y%m%d-%H%M%S}_${experiment.name}
    subdir: ${hydra.job.num}
  sweeper:
    params:
      phase1/latent_space: none,vq
      phase1.trainer.epochs: 3
