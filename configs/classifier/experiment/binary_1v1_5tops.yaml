# @package _global_

# Metadata schema - explicit goal for reliable W&B slicing
meta:
  goal: "classification"

experiment:
  name: "binary_1v1_5tops"

hydra:
  mode: MULTIRUN
  job:
    chdir: true  # Must be true for Hydra to create .hydra/ directory
    name: ${experiment.name}
  # Override run.dir so each job writes directly to outputs/runs/ (not nested under multirun)
  run:
    dir: ${env.output_root}/runs/run_${now:%Y%m%d-%H%M%S}_${experiment.name}_job${zpad:${hydra.job.num}}
  sweep:
    dir: ${env.output_root}/multiruns/exp_${now:%Y%m%d-%H%M%S}_${experiment.name}
    # Set subdir to absolute path matching run.dir so Hydra changes to run.dir instead of creating numbered subdirs
    # Using the same template ensures both resolve to the same path
    subdir: ${env.output_root}/runs/run_${now:%Y%m%d-%H%M%S}_${experiment.name}_job${zpad:${hydra.job.num}}
  sweeper:
    params:
      # Sweep over all 10 binary combinations: (5 choose 2) = 10
      # Label mapping: 1=tttt, 2=ttH, 3=ttW, 4=ttWW, 5=ttZ
      # Format: Comma-separated values using colon separator for label pairs (e.g., 1:2 for labels [1,2])
      # Hydra sweeper splits on commas, data loader parses colon-separated pairs
      data.classifier.selected_labels: 1:2,1:3,1:4,1:5,2:3,2:4,2:5,3:4,3:5,4:5
      # Hyperparameters
      classifier.trainer.epochs: 100
      classifier.trainer.lr: 0.00003
      classifier.trainer.weight_decay: 0.1
      classifier.model.dropout: 0.2
      # Early stopping
      classifier.trainer.early_stopping.enabled: true
      classifier.trainer.early_stopping.patience: 10
